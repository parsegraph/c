<!DOCTYPE html>
<html>
<head>
<title>Ulam Spiral - Rainback</title>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="/environment.css"/>
<script src="/parsegraph-1.3.js"></script>
<script src="/parsegraph-widgets-1.3.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function(event) {
    parsegraph_initialize();
    var window = new parsegraph_Window();
    var sga = new parsegraph_Application(window);
    document.body.appendChild(window.container());
    parsegraph_addEventMethod(top.window, "resize", sga.scheduleRepaint, sga);
    sga.setCameraName("parsegraph_ulam_camera");
    SGA = sga;

    var ulam;
    var COUNT = 100000;
    sga.setBurstIdle(true);
    sga.setGovernor(false);
    var startTime = new Date();
    sga.start(function(app, root) {
        root.setLabel("Ulam Spiral");
        ulam = new parsegraph_Ulam(app, COUNT);
        root.connectNode(parsegraph_DOWNWARD, ulam.node());
        return ulam;
    });
    sga.onIdle(function(timeout) {
        var callAgain = ulam.step(timeout);
        sga.scheduleRepaint();
        if(!callAgain) {
            console.log("Done in " + parsegraph_elapsed(startTime) + "ms");
        }
        return callAgain;
    });
});
</script>
</head>
<body>
</body>
</html>
