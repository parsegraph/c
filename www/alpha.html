<!DOCTYPE html>
<html>
  <head>
    <title>Alpha</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      .parsegraph_Window {
        width: 100%;
        height: 100%;
      }

      body {
        font-family: sans-serif;
        margin: 0;
        padding: 0;
        background: #111;
        color: #eee;
      }

      body > div {
        text-align: center;
        position: absolute;
      }

      .Successful {
        color: green;
      }

      .Crashed {
        color: maroon;
      }

      .Failed {
        color: red;
      }

      @media only screen and (max-width: 980px) {
        body > div {
          width: 100%;
        }

        body > div input {
          clear: left;
        }
      }
    </style>
    <script src="/parsegraph.js"></script>
    <script>
      function fpsRendering() {
        //var frameElapsed = 0;
        //surface.addRenderer(function() {
        // Start timing.
        //frameElapsed = parsegraph_getTimeInMillis();
        //});
        /*var glyphAtlas = new parsegraph_GlyphAtlas(
        parsegraph_UPSCALED_FONT_SIZE, "sans-serif", "white"
    );
    var glyphPainter = new parsegraph_GlyphPainter(surface.gl(), glyphAtlas, shaders);

    var textCamera = new parsegraph_Camera(surface);

    surface.addRenderer(function() {
        var gl = surface.gl();

        gl.disable(gl.DEPTH_TEST);
        gl.disable(gl.CULL_FACE);

        gl.enable(gl.BLEND);
        gl.blendFunc(
            gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA
        );
        glyphPainter.clear();
        glyphPainter.setColor(1, 1, 1);

        glyphPainter.drawText(Math.round(1000/(parsegraph_getTimeInMillis() - frameElapsed))  + "fps", 8, 4, 16);
        glyphPainter.setColor(1, .5, .5);
        glyphPainter.setFontSize(20);

        var drawMultiline = function(x, y, text) {
            var lines = text.split("\n");
            for(var i = 0; i < lines.length; ++i) {
                var line = lines[i];
                glyphPainter.drawText(line, x, y + (1 + i) * glyphPainter.fontSize());
            }
        };

        var t = "";
        t += "position=" + widget.camera.position.toString() + "\n";
        t += "orientation=" + widget.camera.orientation.toString();
        drawMultiline(8, 4, t);
        var world = textCamera.project();
        glyphPainter.render(world);
    });
    */
      }

      document.addEventListener("DOMContentLoaded", function (event) {
        parsegraph_initialize();
        var window = new parsegraph_Window();
        var world = new parsegraph_World();
        document.body.appendChild(window.container());
        var belt = new parsegraph_TimingBelt();
        belt.addWindow(window);
        parsegraph_addEventMethod(
          top.window,
          "resize",
          belt.scheduleUpdate,
          belt
        );

        var widget = new alpha_GLWidget(belt, window);
        window.addComponent(widget.component());
      }); // DOMContentLoaded
    </script>
  </head>
  <body></body>
</html>
