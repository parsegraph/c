<!DOCTYPE html>
<html>
<head>
<title>Primes - Rainback</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css" href="/environment.css"/>
<script src="/parsegraph-1.3.js"></script>
<script src="/parsegraph-widgets-1.3.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function(event) {
    var sga = new parsegraph_Application("Primes");
    sga.setCameraName("parsegraph_primes_camera");
    SGA = sga;
    var primes = null;
    sga.setMathMode(true);
    sga.start(document.body, function(app, userLogin, loginNode) {
        primes = new parsegraph_PrimesWidget(app);
        loginNode.connectNode(parsegraph_FORWARD, primes.node());
        return primes;
    });

    var lastPrime = new Date();
    sga.onIdle(function(timeout) {
        var startTime = new Date();
        var MAX_PRIME = 1024;
        //console.log("Processing timeout: " + primes.position + " " + MAX_PRIME)

        if(parsegraph_elapsed(lastPrime) > 100) {
            primes.step(1);
            sga.scheduleRepaint();
            lastPrime = new Date();
        }
        return primes.position <= MAX_PRIME;
    });
});
</script>
</head>
<body>
</body>
</html>
