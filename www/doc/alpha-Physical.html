<!DOCTYPE html>
<html>
<head>
<title>Physical - Alpha</title>
<link rel=stylesheet type=text/css href="../../../doc/rainback.css">
</head>
<body>
	<div class="grid">
		<div class="logo">
		<nav class="toc" style="clear: none; ">
		<p style="text-align: center">
		<a href=/><img id=logo src="../../../doc/nav-side-logo.png"></img></a>
		</p>
		</nav>
		</div>
		<div class="block title">
		<h1><h1>Alpha-Physical - <a href="index.html">Graph-js</a></h1>
		</h1>
		</div>
		<div class="slot toctitle">
		<h2>Table of Contents</h2>
		<h2>Alpha Physical</h2>
		<ol>
		<li><a href="#alpha_PHYSICAL_TRANSLATE_ROTATE_SCALE">alpha_PHYSICAL_TRANSLATE_ROTATE_SCALE</a>
		<li><a href="#alpha_PHYSICAL_SCALE_ROTATE_TRANSLATE">alpha_PHYSICAL_SCALE_ROTATE_TRANSLATE</a>
		<li><a href="#alpha_PHYSICAL_ROTATE_TRANSLATE_SCALE">alpha_PHYSICAL_ROTATE_TRANSLATE_SCALE</a>
		<li>new <a href="#alpha_Physical">alpha_Physical(parent)</a>
		<li><a href="#.toJSON">.toJSON()</a>
		<li><a href="#.SetOrientation">.SetOrientation(...)</a>
		<li><a href="#.GetOrientation">.GetOrientation()</a>
		<li><a href="#.SetRotationSpeeds">.SetRotationSpeeds(x, y)</a>
		<li><a href="#.GetRotationSpeeds">.GetRotationSpeeds()</a>
		<li><a href="#.Rotate">.Rotate(angle, x, y, z)</a>
		<li><a href="#.RotateGlobal">.RotateGlobal(angle, x, y, z)</a>
		<li><a href="#.YawLeft">.YawLeft(elapsed)</a>
		<li><a href="#.YawRight">.YawRight(elapsed)</a>
		<li><a href="#.PitchUp">.PitchUp(elapsed)</a>
		<li><a href="#.PitchDown">.PitchDown(elapsed)</a>
		<li><a href="#.RollLeft">.RollLeft(elapsed)</a>
		<li><a href="#.RollRight">.RollRight(elapsed)</a>
		<li><a href="#.SetPosition">.SetPosition(vector)</a>
		<li><a href="#.SetPosition">.SetPosition(x, y, z)</a>
		<li><a href="#.ChangePosition">.ChangePosition(x, y, z)</a>
		<li><a href="#.Warp">.Warp(x, y, z)</a>
		<li><a href="#.Warp">.Warp(distanceVec)</a>
		<li><a href="#.WarpForward">.WarpForward(distance)</a>
		<li><a href="#.WarpBackward">.WarpBackward(distance)</a>
		<li><a href="#.WarpLeft">.WarpLeft(distance)</a>
		<li><a href="#.WarpRight">.WarpRight(distance)</a>
		<li><a href="#.WarpUp">.WarpUp(distance)</a>
		<li><a href="#.WarpDown">.WarpDown(distance)</a>
		<li><a href="#.SetSpeeds">.SetSpeeds(x, y, z)</a>
		<li><a href="#.SetSpeeds">.SetSpeeds(speedVec)</a>
		<li><a href="#.GetSpeeds">.GetSpeeds()</a>
		<li><a href="#.SetSpeed">.SetSpeed(speed)</a>
		<li><a href="#.SetVelocity">.SetVelocity(...)</a>
		<li><a href="#.GetVelocity">.GetVelocity()</a>
		<li><a href="#.AddVelocity">.AddVelocity(...)</a>
		<li><a href="#.MoveForward">.MoveForward(elapsed)</a>
		<li><a href="#.MoveBackward">.MoveBackward(elapsed)</a>
		<li><a href="#.MoveLeft">.MoveLeft(elapsed)</a>
		<li><a href="#.MoveRight">.MoveRight(elapsed)</a>
		<li><a href="#.MoveUp">.MoveUp(elapsed)</a>
		<li><a href="#.MoveDown">.MoveDown(elapsed)</a>
		<li><a href="#.ApplyVelocity">.ApplyVelocity()</a>
		<li><a href="#.IsGoodLineageFor">.IsGoodLineageFor(prospectiveChild)</a>
		<li><a href="#.SetParent">.SetParent(parent)</a>
		<li><a href="#.GetParent">.GetParent()</a>
		<li><a href="#.SetScale">.SetScale()</a>
		<li><a href="#.GetScale">.GetScale()</a>
		<li><a href="#.GetModelMatrix">.GetModelMatrix()</a>
		<li><a href="#.GetViewMatrix">.GetViewMatrix()</a>
		<li><a href="#.GetWorldPositionByViewMatrix">.GetWorldPositionByViewMatrix()</a>
		<li><a href="#.GetWorldPosition">.GetWorldPosition()</a>
		<li><a href="#.GetWorldOrientation">.GetWorldOrientation()</a>
		</ol>
		</div>
		<div class="block linksearch" style="font-size: 15px; width: 100%;">
			<div class=links>
			<a href=/login><span class="alphabud" style="background-color: greenyellow">Log in</span></a> 
        <a href=/signup><span class="alphabud" style="background-color: gold">Sign up</span></a> 
        <a href="/import"><span class="alphabud" style="align-content: right">Import</span></a>
       <form id=search action="/search" style="width: %; float:right; display: inline-block;">

        <input name=q></input> <input type=submit value=Search></input>
        </form>
         
    	</div>
		</div>
		<div class="block content">
		<h1>Alpha Physical</h1>
		Physical is an orientation and a position as well as rotation and movement.
		<h3>a<a name="#lpha_PHYSICAL_TRANSLATE_ROTATE_SCALE">lpha_PHYSICAL_TRANSLATE_ROTATE_SCALE</h3></a>
		Orders how a physical's transformations are applied when its world matrix is computed.
		<h3><a name="#alpha_PHYSICAL_SCALE_ROTATE_TRANSLATE">alpha_PHYSICAL_SCALE_ROTATE_TRANSLATE</h3></a>
		Orders how a physical's transformations are applied when its world matrix is computed.
		<h3><a name="#alpha_PHYSICAL_ROTATE_TRANSLATE_SCALE">alpha_PHYSICAL_ROTATE_TRANSLATE_SCALE</h3></a>
		Orders how a physical's transformations are applied when its world matrix is computed.
		<h3>new <a name="#alpha_Physical">alpha_Physical(parent)</h3></a>
		Creates and returns a new physical.
		<p>
		Throws if parent is null. Set to the physical's camera for a default.
		<h3><a name="#.toJSON">.toJSON()</h3></a>
		Returns a object, described like the following, that describes the current state of this physical:
		<table>
		<tr><th>Name<th>Value</tr>
		<tr><td>position<td>[x, y, z]</tr>
		<tr><td>orientation<td>[rx, ry, rz, rw]</tr>
		</table>
		<h3><a name="#.SetOrientation">.SetOrientation(...)</h3></a>
		Sets this physicals's orientation quaternion using the given arguments.
		<h3><a name="#.GetOrientation">.GetOrientation()</h3></a>
		Returns this physical's orientation, as a quaternion.
		<h3><a name="#.SetRotationSpeeds">.SetRotationSpeeds(x, y)</h3></a>
		Sets this physical's rotation speeds, in radians per second, to the given values.
		<h3><a name=".GetRotationSpeeds">.GetRotationSpeeds()</h3></a>
		Directly returns this physical's rotation speeds, as an array of [xSpeed, ySpeed].
		<h3><a name=".Rotate">.Rotate(angle, x, y, z)</h3></a>
		Rotates about the local axis.
		<h3><a name=".RotateGlobal">.RotateGlobal(angle, x, y, z)</h3></a>
		Rotates about the world axis.
		<h3><a name=".YawLeft">.YawLeft(elapsed)</h3></a>
		Rotates this physical in a positive direction about its Y-axis for the given elapsed time.
		<p>
		This rotation takes place at the Y-speed set by rotationSpeed.
		<h3><a name=".YawRight">.YawRight(elapsed)</h3></a>
		Rotates this physical in a negative direction about its Y-axis for the given elapsed time.
		<p>
		This rotation takes place at the Y-speed set by rotationSpeed.
		<h3><a name=".PitchUp">.PitchUp(elapsed)</h3></a>
		Turns the physical up by the specified amount of this physical's rotation X-speed.
		<h3><a name=".PitchDown">.PitchDown(elapsed)</h3></a>
		Turns the physical down by the specified amount of this physical's rotation X-speed.
		<h3><a name=".RollLeft">.RollLeft(elapsed)</h3></a>
		Rotates this physical in a positive direction about its Z-axis for the given elapsed time.
		<p>
		This rotation takes place at the Y-speed set by rotationSpeed.
		<h3><a name=".RollRight">.RollRight(elapsed)</h3></a>
		Rotates this physical in a negative direction about its Z-axis for the given elapsed time.
		<p>
		This rotation takes place at the Y-speed set by rotationSpeed.
		<h3><a name=".SetPosition">.SetPosition(vector)</h3></a>
		Calls .SetPosition(vector[0], vector[1], vector[2]).
		<h3><a name=".SetPosition">.SetPosition(x, y, z)</h3></a>
		Sets this physical's position to the given value, returning this physical's position.
		<h3><a name=".ChangePosition">.ChangePosition(x, y, z)</h3></a>
		Adds the given components to this physical's position.
		<h3><a name=".Warp">.Warp(x, y, z)</h3></a>
		Move this physical's position by the given distance relative to this physical's orientation.
		<h3><a name=".Warp">.Warp(distanceVec)</h3></a>
		Move this physical's position by the given distance vector relative to this physical's orientation.
		<h3><a name=".WarpForward">.WarpForward(distance)</h3></a>
		Moves this physical forward by the given distance.
		<h3><a name=".WarpBackward">.WarpBackward(distance)</h3></a>
		Moves this physical backward by the given distance.
		<h3><a name=".WarpLeft">.WarpLeft(distance)</h3></a>
		Moves this physical in the negative X-axis direction by the given distance.
		<h3><a name=".WarpRight">.WarpRight(distance)</h3></a>
		Moves this physical in the positive X-axis direction by the given distance.
		<h3><a name=".WarpUp">.WarpUp(distance)</h3></a>
		Moves this physical in the positive Y-axis direction by the given distance.
		<h3><a name=".WarpDown">.WarpDown(distance)</h3></a>
		Moves this physical in the negative Y-axis direction by the given distance.
		<h3><a name=".SetSpeeds">.SetSpeeds(x, y, z)</h3></a>
		Sets the speed of this physical to the given components.
		<h3><a name=".SetSpeeds">.SetSpeeds(speedVec)</h3></a>
		Sets the speed of this physical to the given vector components.
		<h3><a name=".GetSpeeds">.GetSpeeds()</h3></a>
		Directly returns the array of this physical's speeds.
		<h3><a name=".SetSpeed">.SetSpeed(speed)</h3></a>
		Sets x,y, and z speeds to the same thing.
		<h3><a name=".SetVelocity">.SetVelocity(...)</h3></a>
		Sets this physical's velocity vector using the given arguments.
		<h3><a name=".GetVelocity">.GetVelocity()</h3></a>
		Returns this physical's velocity vector.
		<h3><a name=".AddVelocity">.AddVelocity(...)</h3></a>
		Adds the given arguments to this physical's velocity vector.
		<h3><a name=".MoveForward">.MoveForward(elapsed)</h3></a>
		Moves this physical in the negative Z-axis direction for the given time.
		<h3><a name=".MoveBackward">.MoveBackward(elapsed)</h3></a>
		Moves this physical in the positive Z-axis direction for the given time.
		<h3><a name=".MoveLeft">.MoveLeft(elapsed)</h3></a>
		Moves this physical in the negative X-axis direction for the given time.
		<h3><a name=".MoveRight">.MoveRight(elapsed)</h3></a>
		Moves this physical in the positive X-axis direction for the given time.
		<h3><a name=".MoveUp">.MoveUp(elapsed)</h3></a>
		Moves this physical in the positive Y-axis direction for the given time.
		<h3><a name=".MoveDown">.MoveDown(elapsed)</h3></a>
		Moves this physical in the negative Y-axis direction for the given time.
		<h3><a name=".ApplyVelocity">.ApplyVelocity()</h3></a>
		Calculates our new position using our current velocity and then resets the velocity.
		<h3><a name=".IsGoodLineageFor">.IsGoodLineageFor(prospectiveChild)</h3></a>
		In order to be a good lineage, a camera must be reached therefore it must not
		infinitely loop.
		<h3><a name=".SetParent">.SetParent(parent)</h3></a>
		Sets this physical's parent to the given value. It must not be null; set the physical's
		parent to the camera for a default.
		<h3><a name=".GetParent">.GetParent()</h3></a>
		Returns this physical's parent.
		<h3><a name=".SetScale">.SetScale()</h3></a>
		Sets this physical's scale using the given arguments.
		<h3><a name=".GetScale">.GetScale()</h3></a>
		Returns this physical's scale vector.
		<h3><a name=".GetModelMatrix">.GetModelMatrix()</h3></a>
		Combine our position and orientation into a matrix.
		<h3><a name=".GetViewMatrix">.GetViewMatrix()</h3></a>
		When fully returned it looks like this
		<pre>
// A -&gt; B -&gt; CAM -&gt; A -&gt; B
// Mults as A * B * (CAM * A * B):Inverse()
		</pre>
		in order for this to work properly make sure that the camera's
		GetViewMatrix() is called before any physicals
		otherwise the physical's will be outdated
		this is to prevent having to retrace the camera's lineage more than once
		<p>
		this would be a good thing to do for any matrix that has many descendants
		say a ship with lots of npcs / players on it
		<p>
		but this would require a proper ordering of physicals
		which isn't feasible atm
		physicals would need to know who is the child of who.
		something like:
		<pre>
		<div style="font-size: 16px">
/*
camera:CalculateViewMatrix();
while SomePhysicalsNotCalculated do
	for all physicalsNotCalculated do
		if parentPhysicalCalculated then
			physical:CalculateViewMatrix()
		end
	end
end	
*/
		</div>
		</pre>
		a more feasible method would be to
		to have a bunch of children known by the physical
		then we simply chain down the list starting at the camera;
		this is a far better solution.
		<pre>
/*
	function CalculateViewMatrices()
		self:CalculateViewMatrix(); 
		-- for myself
		for each child in children do
			child:CalculateViewMatrices() 
			-- for my children
		end
	end
*/
		</pre>
		it starts with a simple camera:CalculateViewMatrices().
		I will return to this.
		<h3><a name=".GetWorldPositionByViewMatrix">.GetWorldPositionByViewMatrix()</h3></a>
		<pre>
return new alpha_RMatrix4([
		  1,0,0,0,
		  0,1,0,0,
		  0,0,1,0,
		  this.position[0], this.position[1], 
		  this.position[2], 1
]).Multiply(this.GetViewMatrix().Inverse());
		</pre>
		<h3><a name=".GetWorldPosition">.GetWorldPosition()</h3></a>
		legacy code; left in case I try this again.<br/>
		it does not work correctly, in all cases
		<h3><a name=".GetWorldOrientation">.GetWorldOrientation()</h3></a>
		legacy code; left in case I try this again.<br/>
		it DOES work
		</div>
		<div class="footer slot style="display: inline-block; "">
    	&copy; 2018 <a href='https://rainback.com'>Rainback, Inc.</a> All rights reserved. <a href=/contact><span class="bud">Contact Us</span></a>
		</div>
	</div>
</body>
</html>
