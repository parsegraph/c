<!DOCTYPE html>
<html>
<head>
<title>parsegraph_List</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<nav class="toc">
<h2>parsegraph_List</h2>
<ol>
<li>parsegraph_List_item
<li>MAX_LIST_NAME_LENGTH
<li>int parsegraph_validateListName(pool, const char* listName)
<li>int parsegraph_List_prepareStatements(pool, dbd)
<li>int parsegraph_List_upgradeTables(pool, dbd)
<li>int parsegraph_List_new(pool, dbd, const char* listName, int* listId)
<li>int parsegraph_List_getID(pool, dbd, const char* listName, int* listId)
<li>int parsegraph_List_getList(pool, dbd, apr_dbd_result_t** res, const char* listName)
<li>int parsegraph_List_getHead(pool, dbd, int listId, int* itemId)
<li>int parsegraph_List_getTail(pool, dbd, int listId, int* itemId)
<li>int parsegraph_List_getName(pool, dbd, int listId, const char** listName, int* typeId)
<li>int parsegraph_List_getNext(pool, dbd, int itemId, int* nextId)
<li>int parsegraph_List_getListId(pool, dbd, int itemId, int* listId)
<li>int parsegraph_List_getPrev(pool, dbd, int itemId, int* prevId)
<li>int parsegraph_List_destroy(pool, dbd, int listId)
<li>int parsegraph_List_length(pool, dbd, int listId, size_t* count)
<li>int parsegraph_List_newItem(pool, dbd, int listId, int typeId, const char* value, int* itemId)
<li>int parsegraph_List_appendItem(pool, dbd, int listId, int typeId, const char* value, int* outItemId)
<li>int parsegraph_List_insertAfter(pool, dbd, int refId, int typeId, const char* value, int* outItemId)
<li>int parsegraph_List_insertBefore(pool, dbd, int refId, int typeId, const char* value, int* outItemId)
<li>int parsegraph_List_moveBefore(pool, dbd, int itemId, int refId)
<li>int parsegraph_List_moveAfter(pool, dbd, int itemId, int refId)
<li>int parsegraph_List_prependItem(pool, dbd, int listId, int typeId, const char* value, int* outItemId)
<li>int parsegraph_List_truncate(pool, dbd, int listId, int* numRemoved)
<li>int parsegraph_List_updateItem(pool, dbd, int itemId, int typeId, const char* value)
<li>int parsegraph_List_removeItem(pool, dbd, int itemId)
<li>int parsegraph_List_destroyItem(pool, dbd, int itemId)
<li>int parsegraph_List_listItems(pool, dbd, int listId, parsegraph_List_item*** values, size_t* nvalues)
<li>int parsegraph_List_setPrev(pool, dbd, int targetId, int prevId)
<li>int parsegraph_List_setNext(pool, dbd, int targetId, int nextId)
</ol>
</nav>

<main class="content">
<h1>parsegraph_List</h1>
<pre>
#include &lt;parsegraph_List.h&gt;
</pre>
<h2>MAX_LIST_NAME_LENGTH</h2>
The maximum allowed length, in characters, of a list name. Defined at 4096 characters.
<h2>int parsegraph_validateListName(pool, const char* listName)</h2>
Returns 0 if the given list name would be considered valid for insertion.
<h2>int parsegraph_List_prepareStatements(pool, dbd)</h2>
Prepares SQL statements for use by this module.<p>Call this function once per DBD before use.
<h2>int parsegraph_List_upgradeTables(pool, dbd)</h2>
Creates or upgrades the List SQL tables in the given DBD instance.
<p>
Call this function once per DBD before use, unless it is known that the SQL tables do not need to be created or upgraded.
<h2>int parsegraph_List_new(pool, dbd, const char* listName, int* listId)</h2>
Creates a new List named the given value, returning its list ID in the given listID pointer.
<ul>
<li>Returns 0 if the list is created.
<li>Returns HTTP_UNAUTHORIZED if the listName does not pass validation.
<li>Returns -1 if a needed SQL query was not defined.
<li>Returns 500 if a database error occurs during creation.
</ul>
<h2>int parsegraph_List_getID(pool, dbd, const char* listName, int* listId)</h2>
Retrieves, using listId, the ID of the list specified by listName.
<p>
listId is set to -1 if there is no list named listName.
<ul>
<li>Returns 0 if the search completed and listId has been set to either the ID or -1.
<li>Returns 500 if an internal error occurred. The value of listID is unspecified.
</ul>
<h2>int parsegraph_List_getList(pool, dbd, apr_dbd_result_t** res, const char* listName)</h2>
Returns a result set for consumption by paresegraph_List_getID.
<h2>int parsegraph_List_getHead(pool, dbd, int listId, int* itemId)</h2>
Retrieves, using itemID, the ID of the first item in the specified list.
<p>
If the specified list is empty, itemID is set to -1.
<ul>
<li>Returns -1 if a needed SQL query was not defined.
<li>Returns 500 if a database error occurs during retrieval.
<li>Returns 0 if the item was retrieved or the list was empty.
</ul>
<h2>int parsegraph_List_getTail(pool, dbd, int listId, int* itemId)</h2>
Same as parsegraph_List_getHead, but for the last item of the specified list.
<h2>int parsegraph_List_getName(pool, dbd, int listId, const char** listName, int* typeId)</h2>
Retrieves, using listName and typeId, the name and type of the list specified by listId.
<p>
If there is no list specified listId, listName is set to 0. The value of typeId is unspecified.
<p>
If the type of the list is null, typeID is set to 0
<ul>
<li>Returns -1 if a SQL query was not defined.
<li>Returns 500 if a runtime error occurred.
<li>Returns 0 if the list was found or not found.
</ul>
<h2>int parsegraph_List_getNext(pool, dbd, int itemId, int* nextId)</h2>
Retrieves, using nextId, the sibling of itemId that immediately follows itemId.
<p>
If there is no such item, nextId is set to -1.
<ul>
<li>Returns -1 if a SQL query was not defined.
<li>Returns 500 if a SQL error occurred during ID retrieval.
<li>Returns 0 if the next list item was found or not found.
</ul>
<h2>int parsegraph_List_getListId(pool, dbd, int itemId, int* listId)</h2>
Retrieves, using listId, the parent list item of the list item specified by itemId.
<p>
If the specified list item has no parent, listID is set to -1.
<ul>
<li>Returns -1 if a SQL query was not defined.
<li>Returns 500 if a database error occurs during retrieval.
<li>Returns 0 if the list id was found or not found.
</ul>
<h2>int parsegraph_List_getPrev(pool, dbd, int itemId, int* prevId)</h2>
Retrieves, using listId, the sibling of itemId that immediately precedes itemId.
<p>
If the specified list item has no previous sibling, prevID is set to -1.
<ul>
<li>Returns -1 if a SQL query was not defined.
<li>Returns 500 if a database error occurs during retrieval.
<li>Returns 0 if the list id was found or not found.
</ul>
<h2>int parsegraph_List_destroy(pool, dbd, int listId)</h2>
Destroys the list specified by listId.
<p>
The list is truncated before destruction; this destruction is recursive.
<ul>
<li>Returns -1 if a SQL query was not defined.
<li>Returns 500 if a database error occurs during destruction.
<li>Returns 0 if the list id was found or not found.
</ul>
<h2>int parsegraph_List_length(pool, dbd, int listId, size_t* count)</h2>
Retrieves, using count, the count of the children of the list specified by listId.
<ul>
<li>Returns -1 if a needed SQL query was not defined.
<li>Returns 500 if a database error occurred during retrieval.
<li>Returns 0 if the length was retrieved.
</ul>
<h2>int parsegraph_List_newItem(pool, dbd, int listId, int typeId, const char* value, int* itemId)</h2>
Creates an incomplete new list item that is a child of the specified list, returning its ID in itemId.
<p>
The next and prev fields must be manually set for the item.
<ul>
<li>Returns -1 if a needed SQL query was not defined.
<li>Returns 500 if a database error occurred during creation.
<li>Returns 0 if the if the item was created.
</ul>
<h2>int parsegraph_List_appendItem(pool, dbd, int listId, int typeId, const char* value, int* outItemId)</h2>
Creates and appends a new list item to the specified list, returning its ID in outItemId.
<ul>
<li>Returns -1 if the item failed to append.
<li>Returns 0 if the if the item was appended.
</ul>
<h2>int parsegraph_List_insertAfter(pool, dbd, int refId, int typeId, const char* value, int* outItemId)</h2>
Creates and inserts a new item after the specified reference item, returning its ID in outItemId.
<ul>
<li>Returns -1 if the item fails to insert.
<li>Returns 0 if the if the item was inserted.
</ul>
<h2>int parsegraph_List_insertBefore(pool, dbd, int refId, int typeId, const char* value, int* outItemId)</h2>
Creates and inserts a new item before the specified reference item, returning its ID in outItemId.
<ul>
<li>Returns -1 if the item fails to insert.
<li>Returns 0 if the if the item was inserted.
</ul>
<h2>int parsegraph_List_moveBefore(pool, dbd, int itemId, int refId)</h2>
Creates and inserts a new item before the specified reference item, returning its ID in outItemId.
<ul>
<li>Returns -1 if the item fails to move.
<li>Returns 0 if the if the item was moved.
</ul>
<h2>int parsegraph_List_moveAfter(pool, dbd, int itemId, int refId)</h2>
Creates and inserts a new item after the specified reference item, returning its ID in outItemId.
<ul>
<li>Returns -1 if the item fails to move.
<li>Returns 0 if the if the item was moved.
</ul>
<h2>int parsegraph_List_prependItem(pool, dbd, int listId, int typeId, const char* value, int* outItemId)</h2>
Creates and prepends a new list item to the specified list, returning its ID in outItemId.
<ul>
<li>Returns -1 if the item failed to prepend.
<li>Returns 0 if the if the item was prepended.
</ul>
<h2>int parsegraph_List_truncate(pool, dbd, int listId, int* numRemoved)</h2>
Recursively deletes all items of the specified list, returning the total number of nodes truncated in <code>numRemoved</code>.
<ul>
<li>Returns 0 on successful truncation.
<li>Returns -1 if a needed SQL query was not defined.
<li>Returns 500 on database error.
</ul>
<h2>int parsegraph_List_updateItem(pool, dbd, int itemId, int typeId, const char* value)</h2>
Updates the type and value of the specified list item.
<ul>
<li>Returns -1 if a needed SQL query was not defined.
<li>Returns 500 on database error.
<li>Returns 0 if zero or more items were updated.
</ul>
<h2>int parsegraph_List_removeItem(pool, dbd, int itemId)</h2>
Removes the item from its parent.
<ul>
<li>Returns -1 if a needed SQL query was not defined.
<li>Returns 500 on database error.
<li>Returns 0 on successful removal.
</ul>
<h2>int parsegraph_List_destroyItem(pool, dbd, int itemId)</h2>
Deletes the specified list item.
<ul>
<li>Returns 0 on success.
<li>Returns -1 if the specified node failed to truncate or be removed before destruction.
<li>Returns 500 on database error during removal.
</ul>
<h2>int parsegraph_List_listItems(pool, dbd, int listId, struct parsegraph_List_item*** values, size_t* nvalues)</h2>
Get an ordered list of children of the specified list item, returning an array of parsegraph_List_items in the value specified by <code>values</code>.
<h3>struct parsegraph_List_item</h2>
<table>
<tr><th>Field<th>Description</tr>
<tr><td>int id<td>List item ID.</tr>
<tr><td>int type<td>Module-defined list item type.</tr>
<tr><td>const char* value<td>Type-defined list item value.</tr>
<tr><td>int nextId<td>ID of the next list item.</tr>
</table>
<ul>
<li>Returns 0 on successful listing.
<li>Returns -1 if orphaned entries are encountered, or if a needed SQL query is not defined.
<li>Returns 500 on database error.
</ul>
<h2>int parsegraph_List_setPrev(pool, dbd, int targetId, int prevId)</h2>
Directly sets the specified target list item's previous field to the named list item.
<p>
If prevId is -1, then the target list item's previous field is cleared.
<h2>int parsegraph_List_setNext(pool, dbd, int targetId, int nextId)</h2>
Directly sets the specified target list item's next field to the named list item.
<p>
If nextId is -1, then the target list item's next field is cleared.
</main>
</body>
</html>
